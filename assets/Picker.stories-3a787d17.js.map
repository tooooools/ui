{"version":3,"file":"Picker.stories-3a787d17.js","sources":["../../lib/components/Picker.jsx","../../node_modules/iconoir/icons/nav-arrow-right.svg?raw","../../node_modules/iconoir/icons/nav-arrow-left.svg?raw"],"sourcesContent":["import style from './Picker.module.scss'\n\nimport { Component } from '../jsx'\nimport { derived, ensure, writable } from '../state'\n\nimport noop from '../utils/noop'\n\nimport Button from './Button'\nimport Toolbar from './Toolbar'\n\nexport default class Picker extends Component {\n  beforeRender (props) {\n    this.handleClick = this.handleClick.bind(this)\n    this.handleOpen = this.handleOpen.bind(this)\n    this.handleToggle = this.handleToggle.bind(this)\n\n    // Setup a ref for all children <Button> and decorate their event-click\n    const buttons = props.children.filter(child => child.type === Button)\n    for (const button of buttons) {\n      button.props.ref = this.refArray('buttons')\n      button.props['event-click'] = this.handleClick(\n        buttons.indexOf(button),\n        button.props['event-click'] || noop\n      )\n    }\n\n    this.state = {\n      iconOpen: ensure(writable)(props['store-iconOpen'], props.iconOpen),\n      iconClose: ensure(writable)(props['store-iconClose'], props.iconClose),\n\n      label: ensure(writable)(props['store-label'], props.label),\n      title: ensure(writable)(props['store-title'], props.title),\n\n      open: ensure(writable)(props['store-open'], props.open),\n      disabled: ensure(writable)(props['store-disabled'], props.disabled),\n      hidden: ensure(writable)(props['store-hidden'], props.hidden)\n    }\n\n    this.state.toggleIcon = derived([\n      this.state.open,\n      this.state.iconClose,\n      this.state.iconOpen\n    ], () => this.state.open.current\n      ? this.state.iconClose.current\n      : this.state.iconOpen.current\n    )\n  }\n\n  template (props, state) {\n    return (\n      <div\n        {...this.dataProps}\n        id={props.id}\n        class={[\n          style.picker,\n          {\n            'has-auto-order': props.autoOrder,\n            'is-open': state.open,\n            'is-disabled': state.disabled,\n            'is-hidden': state.hidden\n          },\n          ...(Array.isArray(props.class) ? props.class : [props.class])\n        ]}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n      >\n        <Button\n          class={style.picker__toggle}\n          store-icon={state.toggleIcon}\n          store-label={state.label}\n          store-title={state.title}\n          store-active={state.open}\n          event-click={this.handleToggle}\n        />\n\n        <Toolbar\n          class={style.picker__toolbar}\n          compact\n        >\n          {props.children}\n        </Toolbar>\n      </div>\n    )\n  }\n\n  afterRender () {\n    this.state.open.subscribe(this.handleOpen)\n  }\n\n  handleOpen () {\n    if (this.state.open.get()) (this.props['event-open'] ?? noop)(null, this)\n    else (this.props['event-close'] ?? noop)(null, this)\n  }\n\n  handleToggle (e) {\n    e.stopPropagation()\n    this.state.open.update(s => !s)\n  }\n\n  handleClick (i, callback) {\n    return async e => {\n      // Only open Picker if closed\n      if (!this.state.open.get()) {\n        e.stopPropagation()\n        this.state.open.set(true)\n        return\n      }\n\n      // Update all buttons active state\n      for (let index = 0; index < this.refs.buttons.length; index++) {\n        this.refs.buttons[index].state.active.set(index === i)\n      }\n\n      if (this.props.autoClose) this.state.open.set(false)\n      ;(this.props['event-change'] ?? noop)(null, this)\n\n      await callback(e, this.refs.buttons[i])\n    }\n  }\n\n  beforeDestroy () {\n    this.state.open.unsubscribe(this.handleOpen)\n  }\n}\n","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" stroke-width=\\\"1.5\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n<path d=\\\"M9 6L15 12L9 18\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/>\\n</svg>\\n\"","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" stroke-width=\\\"1.5\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n<path d=\\\"M15 6L9 12L15 18\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/>\\n</svg>\\n\""],"names":["Picker","Component","props","buttons","child","Button","button","noop","ensure","writable","derived","state","h","style","e","Toolbar","s","i","callback","index","IconOpen","IconClose"],"mappings":"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","x_google_ignoreList":[1,2]}