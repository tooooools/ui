{"version":3,"file":"Component-76a9acab.cjs","sources":["../lib/jsx/h.js","../lib/jsx/utils/extend.js","../lib/utils/noop.js","../lib/utils/logger.js","../lib/jsx/utils/Collector.js","../lib/jsx/utils/setDomAttrib.js","../lib/jsx/utils/rawRender.js","../lib/jsx/utils/dispatch.js","../lib/jsx/render.js","../lib/jsx/Component.js"],"sourcesContent":["// Create a VNode (virtual DOM element)\n\nfunction h (type, props) {\n  const vn = {}\n\n  vn.vnode = true\n  vn.type = type\n  vn.props = props || {}\n  vn.children = [].concat.apply([], [].slice.call(arguments, 2)) // array & flatten\n\n  vn.isInstance = (\n    type &&\n\t\ttype.template &&\n\t\ttypeof type.template === 'function'\n  )\n\n  vn.isComponent = (\n    typeof type === 'function' &&\n\t\ttype.prototype &&\n\t\ttypeof type.prototype.render === 'function'\n  )\n\n  vn.isStateless = typeof type === 'function' && !vn.isComponent\n  vn.isDom = typeof type === 'string'\n\n  return vn\n}\n\nh.f = p => p.children\n\nexport default h\n","export default function extend (obj, nObj) {\n  for (const i in nObj) obj[i] = nObj[i]\n  return obj\n}\n","export default function () {}\n","import noop from '/lib/utils/noop'\n\nexport default function logger (prefix, color, background, mute) {\n  if (mute) return { log: noop, warn: noop, error: noop }\n\n  const pre = []\n  prefix = prefix.toUpperCase()\n\n  pre.push(`%c ${prefix} `)\n  let style = 'font-weight:bold;'\n  if (color) style += `color:${color};`\n  if (background) style += `background-color:${background}`\n  pre.push(style)\n\n  return {\n    log: console.log.bind(console, ...pre),\n    warn: console.warn.bind(console, ...pre),\n    error: console.error.bind(console, ...pre)\n  }\n}\n","\nconst TYPES = ['nodes', 'components', 'refs', 'domEvents', 'storeEvents']\n\nexport default class Collector {\n  constructor () {\n    this.data = {}\n    for (let i = 0; i < TYPES.length; i++) { this.data[TYPES[i]] = [] }\n  }\n\n  append (obj) {\n    for (const k in obj) { this.data[k] = this.data[k].concat(obj[k]) }\n  }\n\n  set (obj) {\n    for (const k in obj) { this.data[k] = obj[k] }\n  }\n\n  get () {\n    return this.data\n  }\n}\n","// Some portions of code are taken from preact\n// https://github.com/developit/preact/blob/master/src/dom/index.js\n\nconst namespaces = [\n  'xlink',\n  'xmlns',\n  'xml'\n]\n\n// Some attribute doesn't work well when used online as node.attr = value\n// We double it with node.setAttribute\nconst doubleAttr = new Set([\n  'placeholder',\n  'autoplay',\n  'muted',\n  'for',\n  'webkit-playsinline',\n  'playsinline',\n  'selected'\n])\n\nconst isSignal = value => value && String(value._symbol) === 'Symbol(signal)'\n\nlet val\n\nconst startsWith = (str, w) => str.substr(0, w.length) === w\nconst updateClass = n => (v, el) => el.classList.toggle(n, v || false)\nconst updateAttrib = (name = 'textContent', isSvg) => (v, el) => {\n  const ns = isSvg && (name !== (name = name.replace(/^xlink:?/, '')))\n  if (ns) el.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), v)\n  else {\n    if (v === undefined) {\n      el.removeAttribute(name)\n      return\n    }\n\n    val = v == null ? '' : v\n    if (!isSvg) el[name] = val\n    if (isSvg || doubleAttr.has(name) || startsWith(name, 'data-')) {\n      el.setAttribute(name, val)\n    }\n  }\n}\n\nfunction setDomAttrib (el, name, value, collector, isSvg) {\n  // Don't treat undefined value\n  if (value === undefined) return\n\n  // Ignore JSX sourcemap props\n  if (name === '__self' || name === '__source') return\n\n  // Normalize class attribute\n  if (name === 'className') name = 'class'\n\n  // Correct attribute like xlmns:xlink\n  for (let i = 0; i < namespaces.length; i++) {\n    if (startsWith(name, namespaces[i])) {\n      const len = namespaces[i].length\n      if (name[len] && name[len] !== ':') {\n        name = namespaces[i] + ':' + name[len].toLowerCase() + name.substr(len + 1, name.length)\n      }\n      break\n    }\n  }\n\n  // Ignored props\n  if (name === 'ref') {\n    //\n  } else if (startsWith(name, 'event-')) {\n    // Synthetic DOM Events\n    const eventName = name.toLowerCase().substring(6)\n    collector.append({ domEvents: [{ el, evt: eventName, fn: value }] })\n  } else if (name === 'store') {\n    const evts = Array.isArray(value) ? value : [value]\n    const events = []\n\n    for (let i = 0, l = evts.length; i < l; i++) {\n      const evt = Array.isArray(evts[i]) ? evts[i] : [evts[i]]\n      const store = evt[0]\n      const fn = evt[1]\n      const init = evt[2] !== undefined ? evt[2] : true\n      if (!store) continue\n      events.push({ store, fn, init, el })\n    }\n\n    collector.append({ storeEvents: events })\n  } else if (startsWith(name, 'store-class-')) {\n    const className = name.substring(12)\n    const fn = updateClass(className)\n    collector.append({ storeEvents: [{ store: value, init: true, fn, el }] })\n  } else if (startsWith(name, 'store-') || isSignal(value)) {\n    let attrib = startsWith(name, 'store-') ? name.substring(6) : name\n    if (attrib === 'text') attrib = 'textContent'\n    const fn = updateAttrib(attrib, isSvg)\n    collector.append({ storeEvents: [{ store: value, init: true, fn, el }] })\n  } else if (typeof value === 'function' && startsWith(name, 'on')) {\n    // Event attribute (usually do not use this, prefer the synthetic ones)\n    const eventType = name.toLowerCase()\n    el[eventType] = value\n  } else if (name === 'class' && !isSvg) {\n    // Class - only for non-svg node\n\n    // Handle basic class='foo'\n    if (typeof value === 'string') {\n      el.className = value || ''\n    }\n\n    // Handle class={['a', 'b', { 'c': <Signal|bool>, 'd': <Signal|bool> }, 'e', { 'f': <Signal|bool> }]}\n    if (typeof value === 'object') {\n      for (const key in value) {\n        const v = value[key] // a, b, { c, d }, e, f\n        if (typeof v === 'string') el.classList.add(...v.split(' '))\n        if (typeof value === 'object') {\n          for (const k in v) {\n            if (typeof v[k] === 'boolean') el.classList.toggle(k, v[k])\n            if (isSignal(v[k])) {\n              const fn = updateClass(k)\n              collector.append({ storeEvents: [{ store: v[k], init: true, fn, el }] })\n            }\n          }\n        }\n      }\n    }\n  } else if (name === 'style') {\n    // Style attribute\n    if (typeof value === 'object') {\n      for (const key in value) {\n        const updateProp = v => {\n          if (key.startsWith('--')) el.style.setProperty(key, v)\n          else { el.style[key] = v }\n        }\n\n        if (isSignal((value ?? [])[key])) {\n          collector.append({ storeEvents: [{ store: value[key], init: true, fn: updateProp, el }] })\n        } else {\n          updateProp(value[key])\n        }\n      }\n    } else if (typeof value === 'string') el.style.cssText = value\n  } else if (name !== 'list' && name !== 'type' && !isSvg && name in el) {\n    // Attrib\n    // Attempt to set an attribute to the given value.\n    // IE & FF throw for certain property-value combinations.\n    try { updateAttrib(name, isSvg)(value, el) } catch (e) { /* */ }\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    updateAttrib(name, isSvg)(value, el)\n  }\n}\n\nexport default setDomAttrib\n","\nimport Collector from './Collector'\nimport setDomAttrib from './setDomAttrib'\nimport extend from './extend'\n\nfunction arr (e) {\n  return Array.isArray(e) ? e : [e]\n}\n\n// ---- RAW RENDERER ----\nfunction rawRender (vdom, isSvg) {\n  if (Array.isArray(vdom)) return renderArray(vdom, isSvg)\n  if (vdom instanceof window.Element) return renderDirectDom(vdom, isSvg)\n\n  if (\n    vdom === null ||\n\t\ttypeof vdom !== 'object' ||\n\t\t!vdom.vnode\n  ) return renderPrimitive(vdom, isSvg)\n\n  // one-level deep flatten children array\n  const props = extend(\n    extend({}, vdom.props),\n    { children: [].concat.apply([], vdom.children || []) }\n  )\n\n  if (vdom.isDom) return renderDom(vdom, props, isSvg)\n  if (vdom.isInstance) return renderClass(vdom, props, isSvg, true)\n  if (vdom.isStateless) return renderStateless(vdom, props, isSvg)\n  if (vdom.isComponent) return renderClass(vdom, props, isSvg)\n}\n\n// ---- ARRAY ----\nfunction renderArray (vdoms, isSvg) {\n  vdoms = arr(vdoms)\n  const collector = new Collector()\n  for (let i = 0; i < vdoms.length; i++) { collector.append(rawRender(vdoms[i], isSvg)) }\n  return collector.get()\n}\n\n// ---- PRIMITIVE ----\nfunction renderPrimitive (vdom) {\n  const collector = new Collector()\n\n  if (vdom === null || vdom === undefined || vdom === false) return collector.get()\n  collector.append({ nodes: document.createTextNode(vdom + '') })\n  return collector.get()\n}\n\n// ---- DOM ----\nfunction renderDom (vdom, props, isSvg) {\n  // Render and collect vdom's children\n  const collector = new Collector()\n  let domChildren = []\n\n  if (vdom.type === 'svg') isSvg = true\n\n  for (let i = 0; i < props.children.length; i++) {\n    const result = rawRender(props.children[i], isSvg)\n    if (result.nodes) {\n      domChildren = domChildren.concat(result.nodes)\n      collector.append({\n        components: result.components,\n        refs: result.refs,\n        domEvents: result.domEvents,\n        storeEvents: result.storeEvents\n      })\n    }\n  }\n\n  // Create dom element\n  const el = isSvg\n    ? document.createElementNS('http://www.w3.org/2000/svg', vdom.type)\n    : document.createElement(vdom.type)\n\n  for (const k in vdom.props) { setDomAttrib(el, k, vdom.props[k], collector, isSvg) }\n\n  for (let i = 0; i < domChildren.length; i++) { el.appendChild(domChildren[i]) }\n\n  if (props.ref) collector.append({ refs: { ref: el, fn: props.ref } })\n  collector.append({ nodes: el })\n\n  return collector.get()\n}\n\n// ---- DIRECT DOM ----\nfunction renderDirectDom (vdom) {\n  const collector = new Collector()\n  collector.append({ nodes: vdom })\n  return collector.get()\n}\n\n// ---- STATELESS ----\nfunction renderStateless (_vdom, props, isSvg) {\n  const collector = new Collector()\n  const vdom = _vdom.type(props)\n  collector.append(rawRender(vdom, isSvg))\n  return collector.get()\n}\n\n// ---- CLASS ----\nfunction renderClass (_vdom, props, isSvg, isInstance = false) {\n  const collector = new Collector()\n\n  // instanciate it and call beforeRender\n\tconst instance = isInstance ? _vdom.type : new _vdom.type(props) // eslint-disable-line\n  if (isInstance) props = instance.props\n\n  instance.beforeRender(props)\n\n  const vdom = instance.template(props, instance.state || {}) || props.children\n\n  // append its own ref ? not sur if I need to do this here or in the collector reset\n  if (props.ref) collector.append({ refs: { ref: instance, fn: props.ref } })\n  collector.append(rawRender(vdom, isSvg))\n\n  // create a useful \"base\" property\n  const nodes = collector.data.nodes\n  instance.base = nodes.length > 1 ? nodes : nodes[0]\n\n  // collect all sub refs / components and add them to the instance's own collector\n  // instance._collector = {}\n\n  for (const k in collector.data) {\n    if (k === 'nodes') continue\n    if (!instance._collector[k]) instance._collector[k] = []\n    instance._collector[k] = instance._collector[k]\n      .concat(collector.data[k])\n  }\n\n  // reset the collector (collector.components only contains the current instance)\n  // used for possible parents and for correct didmount / refs dispatching\n  collector.set({\n    components: [instance],\n    refs: [],\n    domEvents: [],\n    storeEvents: []\n  })\n\n  // add a parent \"private\" property to each sub-components\n  for (let i = 0; i < instance._collector.components.length; i++) {\n    instance._collector.components[i]._parent = instance\n  }\n\n  return collector.get()\n}\n\nexport default rawRender\n","export function dispatch (component, cb, topDown) {\n  const subs = component._collector && component._collector.components\n  if (topDown) cb(component)\n  if (subs) {\n    for (let i = 0; i < subs.length; i++) dispatch(subs[i], cb)\n  }\n  if (!topDown) cb(component)\n}\n\nfunction callRefs (component) {\n  for (let i = 0; i < component._collector.refs.length; i++) {\n    component._collector.refs[i].fn(component._collector.refs[i].ref)\n    // Is this really needed or a good thing ?\n    component._collector.refs[i].ref = null\n  }\n}\n\nfunction callStoreListeners (component) {\n  for (let i = 0; i < component._collector.storeEvents.length; i++) {\n    const event = component._collector.storeEvents[i]\n    const oldfn = event.fn\n\t\tevent.fn = function ( v ) { oldfn( v, event.el ) }; // eslint-disable-line\n    event.store.subscribe(event.fn)\n    if (event.init) event.fn(event.store.current)\n  }\n}\n\nfunction callDomListeners (component) {\n  if (component.test) console.log('call dom listeners', component._collector.domEvents)\n  for (let i = 0; i < component._collector.domEvents.length; i++) {\n    const event = component._collector.domEvents[i]\n    event.el.addEventListener(event.evt, event.fn)\n  }\n}\n\nexport function dispatchRefs (component) {\n  dispatch(component, callRefs)\n}\n\nexport function dispatchListeners (component) {\n  dispatch(component, callDomListeners)\n  dispatch(component, callStoreListeners)\n}\n","import rawRender from './utils/rawRender'\nimport { dispatchListeners, dispatchRefs, dispatch } from './utils/dispatch'\n\nconst SvgTagNames = new Set([\n  'g',\n  'svg',\n  'defs',\n  'mask'\n])\n\nexport default function render (vnode, parent = document.body, context) {\n  // render\n  let i = 0\n  const rendered = rawRender(vnode, parent && SvgTagNames.has(parent.tagName))\n\n  // dispatch callback refs\n  let mockComponent = { _collector: rendered } // for dispatch convenience\n  dispatchRefs(mockComponent)\n\n  // dispatch afterRender\n  dispatch(mockComponent, function (c) {\n    c.afterRender && c.afterRender(c.props)\n  })\n\n  // mount\n  if (typeof parent === 'function') {\n    const nodes = rendered.nodes.length < 2 ? rendered.nodes[0] : rendered.nodes\n    parent(nodes)\n  } else if (parent instanceof window.Element) {\n    for (i = 0; i < rendered.nodes.length; i++) {\n      parent.appendChild(rendered.nodes[i])\n    }\n  } else if (typeof parent === 'object' && parent !== null && parent.insertBefore) {\n    for (i = 0; i < rendered.nodes.length; i++) {\n      parent.insertBefore.parentNode.insertBefore(rendered.nodes[i], parent.insertBefore)\n    }\n  }\n\n  // This conditionnal avoids calling the dispatchers twice if\n  // the renders is made during before / after render\n  if (!context || context.mounted) {\n    // Dispatch listeners\n    dispatchListeners(mockComponent)\n\n    // dispatch afterMounts\n    dispatch(mockComponent, function (c) {\n      c.mounted = true\n      c.afterMount && c.afterMount(c.props)\n    })\n  }\n\n  // Add items to context\n  if (context && context._collector) {\n    const c = context._collector\n\n    for (i = 0; i < rendered.components.length; i++) {\n      rendered.components[i]._parent = context\n    }\n\n    if (c.refs) c.refs = c.refs.concat(rendered.refs)\n    if (c.components) c.components = c.components.concat(rendered.components)\n    if (c.domEvents) c.domEvents = c.domEvents.concat(rendered.domEvents)\n    if (c.storeEvents) c.storeEvents = c.storeEvents.concat(rendered.storeEvents)\n  }\n\n  mockComponent = undefined\n  return rendered\n}\n","import logger from '../utils/logger'\nimport _render from './render'\n\nexport default class Component {\n  static flatten (component) {\n    let children = []\n    for (const child of Array.isArray(component) ? component : (component.children ?? [])) {\n      children = children.concat(child, Component.flatten(child))\n    }\n    return children\n  }\n\n  constructor (props = {}) {\n    this._parent = null\n    this._collector = { refs: [], components: [], domEvents: [], storeEvents: [] }\n    this._storeListeners = []\n\n    this.refs = {}\n    this.state = {}\n    this.store = {}\n\n    // Contains all component properties and children.\n    // Do not modify it directly, recreate a new component using `cloneElement`\n    this.props = props || {}\n\n    // HTMLElement used as \"base\" for the component instance.\n    // Can also be an array of elements if `template` return an array.\n    this.base = null\n\n    // Set to true when component is mounted\n    this.mounted = false\n\n    // Set to true when component is destroyed\n    this.destroyed = false\n\n    const label = props.name || this.constructor.name || 'Component'\n    const { log, warn, error } = logger(\n      label,\n      'white',\n      '#000',\n      props.disableLog\n    )\n\n    this.log = log\n    this.warn = warn\n    this.error = error\n  }\n\n  get dataProps () {\n    return Object.entries(this.props)\n      .filter(([attr]) => attr.startsWith('data-'))\n      .reduce((acc, [attr, value]) => ({ ...acc, [attr]: value }), {})\n  }\n\n  storeSubscribe (store, method, context, init = true) {\n    store.subscribe(method, context)\n    this._storeListeners.push([store, method, context])\n    if (init) method.call(context, store.current)\n  }\n\n  // `component.template` will be called during the component\n  // initial rendering to create the `component.base` node\n  // You can return real dom or jsx\n  template () {}\n\n  // `component.beforeRender` will be called by `render`\n  // just before the component template rendering\n  beforeRender () {}\n\n  // `component.afterRender` will be called by `render`\n  // when all the rendered dom tree is rendered\n  afterRender () {}\n\n  // `component.afterMount` will be called by `render`\n  // when all the rendered dom tree is mounted\n  afterMount () {}\n\n  // `component.beforeDestroy` will be called\n  // when the component or one of its ancestors is destroyed\n  beforeDestroy () {}\n\n  // Quickly add ref to component\n  ref (k) {\n    const self = this\n    return function updateRef (el) {\n      self.refs[k] = el\n    }\n  }\n\n  // Quickly add ref to an array of component refs\n  refArray (k, poolable = false) {\n    const arr = this.refs[k] || (this.refs[k] = [])\n    let index = arr.length\n    let pools, pool\n\n    if (poolable) {\n      pools = this.refs.__pools || (this.refs.__pools = {})\n      pool = pools[k] || (pools[k] = [])\n      if (pool.length) index = pool.pop()\n    }\n\n    arr[index] = null\n\n    return function updateRefArray (el) {\n      arr[index] = el\n      if (poolable) pool.push(index)\n    }\n  }\n\n  // Quickly add ref to a hashmap of component refs\n  refMap (id, k) {\n    const map = this.refs[k] || (this.refs[k] = new Map())\n    return function updateRefHashmap (el) {\n      if (el) map.set(id, el)\n      else map.delete(id)\n    }\n  }\n\n  // Render a vnode or array of vnodes\n  // and register the rendered content as \"child\" of this component.\n  // Use this method when you want to add content to the component\n  // after the initial rendering. This ensures new items will be\n  // correctly unmount when the component is destroyed.\n  render (vdom, parent) {\n    return _render(vdom, parent, this)\n  }\n\n  // Destroy the component and its children components.\n  // - This also removes component props and de-reference it from its parent.\n  // - Callback refs inside the component tree will be re-called with `null`\n  // - Set component.mounted to false\n  destroy () {\n    let i = 0\n    this.beforeDestroy(this.props)\n\n    // Unlisten to dom events\n    for (i = this._collector.domEvents.length - 1; i >= 0; i--) {\n      const event = this._collector.domEvents[i]\n      event.el.removeEventListener(event.evt, event.fn)\n    }\n\n    // Unlisten to store events\n    for (i = this._collector.storeEvents.length - 1; i >= 0; i--) {\n      const event = this._collector.storeEvents[i]\n      event.store.unsubscribe(event.fn)\n    }\n\n    // Unlisten to store events 2\n    for (i = this._storeListeners.length - 1; i >= 0; i--) {\n      const event = this._storeListeners[i]\n      event[0].unsubscribe(event[1], event[2])\n    }\n\n    // destroy subcomponents\n    for (i = this._collector.components.length - 1; i >= 0; i--) {\n      this._collector.components[i].destroy()\n    }\n\n    this.mounted = false\n    this.destroyed = true\n\n    // unregister component from parent and dispose _parent\n    if (this._parent) {\n      const index = this._parent._collector.components.indexOf(this)\n      if (~index) this._parent._collector.components.splice(index, 1)\n      this._parent = null\n    }\n\n    // callback all ref with null and destroy them from the collector\n    for (i = this._collector.refs.length - 1; i >= 0; i--) {\n      this._collector.refs[i].fn(null)\n      this._collector.refs.splice(i, 1)\n    }\n\n    // Unmount from dom\n    let base = Array.isArray(this.base) ? this.base : [this.base]\n    for (i = 0; i < base.length; i++) {\n      if (base[i] && base[i].parentNode) base[i].parentNode.removeChild(base[i])\n    }\n\n    // Remove base\n    this.base = base = null\n\n    // Remove props / state / store / refs to avoid memory leaks\n    this.props = null\n    this.state = null\n    this.store = null\n    this.refs = null\n    this._storeListeners = null\n  }\n}\n"],"names":["h","type","props","vn","p","extend","obj","nObj","i","noop","logger","prefix","color","background","mute","pre","style","TYPES","Collector","k","namespaces","doubleAttr","isSignal","value","val","startsWith","str","w","updateClass","n","v","el","updateAttrib","name","isSvg","setDomAttrib","collector","len","eventName","evts","events","l","evt","store","fn","init","className","attrib","eventType","key","updateProp","arr","e","rawRender","vdom","renderArray","renderDirectDom","renderPrimitive","renderDom","renderClass","renderStateless","vdoms","domChildren","result","_vdom","isInstance","instance","nodes","dispatch","component","cb","topDown","subs","callRefs","callStoreListeners","event","oldfn","callDomListeners","dispatchRefs","dispatchListeners","SvgTagNames","render","vnode","parent","context","rendered","mockComponent","c","Component","children","child","label","log","warn","error","attr","acc","method","self","poolable","index","pools","pool","id","map","_render","base"],"mappings":"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"}