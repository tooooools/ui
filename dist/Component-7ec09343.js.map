{"version":3,"file":"Component-7ec09343.js","sources":["../lib/jsx/h.js","../lib/jsx/utils/extend.js","../lib/utils/noop.js","../lib/utils/logger.js","../lib/jsx/utils/Collector.js","../lib/jsx/utils/setDomAttrib.js","../lib/jsx/utils/rawRender.js","../lib/jsx/utils/dispatch.js","../lib/jsx/render.js","../lib/jsx/Component.js"],"sourcesContent":["// Create a VNode (virtual DOM element)\n\nfunction h (type, props) {\n  const vn = {}\n\n  vn.vnode = true\n  vn.type = type\n  vn.props = props || {}\n  vn.children = [].concat.apply([], [].slice.call(arguments, 2)) // array & flatten\n\n  vn.isInstance = (\n    type &&\n\t\ttype.template &&\n\t\ttypeof type.template === 'function'\n  )\n\n  vn.isComponent = (\n    typeof type === 'function' &&\n\t\ttype.prototype &&\n\t\ttypeof type.prototype.render === 'function'\n  )\n\n  vn.isStateless = typeof type === 'function' && !vn.isComponent\n  vn.isDom = typeof type === 'string'\n\n  return vn\n}\n\nh.f = p => p.children\n\nexport default h\n","export default function extend (obj, nObj) {\n  for (const i in nObj) obj[i] = nObj[i]\n  return obj\n}\n","export default function () {}\n","import noop from '/lib/utils/noop'\n\nexport default function logger (prefix, color, background, mute) {\n  if (mute) return { log: noop, warn: noop, error: noop }\n\n  const pre = []\n  prefix = prefix.toUpperCase()\n\n  pre.push(`%c ${prefix} `)\n  let style = 'font-weight:bold;'\n  if (color) style += `color:${color};`\n  if (background) style += `background-color:${background}`\n  pre.push(style)\n\n  return {\n    log: console.log.bind(console, ...pre),\n    warn: console.warn.bind(console, ...pre),\n    error: console.error.bind(console, ...pre)\n  }\n}\n","\nconst TYPES = ['nodes', 'components', 'refs', 'domEvents', 'storeEvents']\n\nexport default class Collector {\n  constructor () {\n    this.data = {}\n    for (let i = 0; i < TYPES.length; i++) { this.data[TYPES[i]] = [] }\n  }\n\n  append (obj) {\n    for (const k in obj) { this.data[k] = this.data[k].concat(obj[k]) }\n  }\n\n  set (obj) {\n    for (const k in obj) { this.data[k] = obj[k] }\n  }\n\n  get () {\n    return this.data\n  }\n}\n","// Some portions of code are taken from preact\n// https://github.com/developit/preact/blob/master/src/dom/index.js\n\nconst namespaces = [\n  'xlink',\n  'xmlns',\n  'xml'\n]\n\n// Some attribute doesn't work well when used online as node.attr = value\n// We double it with node.setAttribute\nconst doubleAttr = new Set([\n  'placeholder',\n  'autoplay',\n  'muted',\n  'for',\n  'webkit-playsinline',\n  'playsinline',\n  'selected'\n])\n\nconst isSignal = value => value && String(value._symbol) === 'Symbol(signal)'\n\nlet val\n\nconst startsWith = (str, w) => str.substr(0, w.length) === w\nconst updateClass = n => (v, el) => el.classList.toggle(n, v || false)\nconst updateAttrib = (name = 'textContent', isSvg) => (v, el) => {\n  const ns = isSvg && (name !== (name = name.replace(/^xlink:?/, '')))\n  if (ns) el.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), v)\n  else {\n    if (v === undefined) {\n      el.removeAttribute(name)\n      return\n    }\n\n    val = v == null ? '' : v\n    if (!isSvg) el[name] = val\n    if (isSvg || doubleAttr.has(name) || startsWith(name, 'data-')) {\n      el.setAttribute(name, val)\n    }\n  }\n}\n\nfunction setDomAttrib (el, name, value, collector, isSvg) {\n  // Don't treat undefined value\n  if (value === undefined) return\n\n  // Ignore JSX sourcemap props\n  if (name === '__self' || name === '__source') return\n\n  // Normalize class attribute\n  if (name === 'className') name = 'class'\n\n  // Correct attribute like xlmns:xlink\n  for (let i = 0; i < namespaces.length; i++) {\n    if (startsWith(name, namespaces[i])) {\n      const len = namespaces[i].length\n      if (name[len] && name[len] !== ':') {\n        name = namespaces[i] + ':' + name[len].toLowerCase() + name.substr(len + 1, name.length)\n      }\n      break\n    }\n  }\n\n  // Ignored props\n  if (name === 'ref') {\n    //\n  } else if (startsWith(name, 'event-')) {\n    // Synthetic DOM Events\n    const eventName = name.toLowerCase().substring(6)\n    collector.append({ domEvents: [{ el, evt: eventName, fn: value }] })\n  } else if (name === 'store') {\n    const evts = Array.isArray(value) ? value : [value]\n    const events = []\n\n    for (let i = 0, l = evts.length; i < l; i++) {\n      const evt = Array.isArray(evts[i]) ? evts[i] : [evts[i]]\n      const store = evt[0]\n      const fn = evt[1]\n      const init = evt[2] !== undefined ? evt[2] : true\n      if (!store) continue\n      events.push({ store, fn, init, el })\n    }\n\n    collector.append({ storeEvents: events })\n  } else if (startsWith(name, 'store-class-')) {\n    const className = name.substring(12)\n    const fn = updateClass(className)\n    collector.append({ storeEvents: [{ store: value, init: true, fn, el }] })\n  } else if (startsWith(name, 'store-') || isSignal(value)) {\n    let attrib = startsWith(name, 'store-') ? name.substring(6) : name\n    if (attrib === 'text') attrib = 'textContent'\n    const fn = updateAttrib(attrib, isSvg)\n    collector.append({ storeEvents: [{ store: value, init: true, fn, el }] })\n  } else if (typeof value === 'function' && startsWith(name, 'on')) {\n    // Event attribute (usually do not use this, prefer the synthetic ones)\n    const eventType = name.toLowerCase()\n    el[eventType] = value\n  } else if (name === 'class' && !isSvg) {\n    // Class - only for non-svg node\n\n    // Handle basic class='foo'\n    if (typeof value === 'string') {\n      el.className = value || ''\n    }\n\n    // Handle class={['a', 'b', { 'c': <Signal|bool>, 'd': <Signal|bool> }, 'e', { 'f': <Signal|bool> }]}\n    if (typeof value === 'object') {\n      for (const key in value) {\n        const v = value[key] // a, b, { c, d }, e, f\n        if (typeof v === 'string') el.classList.add(...v.split(' '))\n        if (typeof value === 'object') {\n          for (const k in v) {\n            if (typeof v[k] === 'boolean') el.classList.toggle(k, v[k])\n            if (isSignal(v[k])) {\n              const fn = updateClass(k)\n              collector.append({ storeEvents: [{ store: v[k], init: true, fn, el }] })\n            }\n          }\n        }\n      }\n    }\n  } else if (name === 'style') {\n    // Style attribute\n    if (typeof value === 'object') {\n      for (const key in value) {\n        const updateProp = v => {\n          if (key.startsWith('--')) el.style.setProperty(key, v)\n          else { el.style[key] = v }\n        }\n\n        if (isSignal((value ?? [])[key])) {\n          collector.append({ storeEvents: [{ store: value[key], init: true, fn: updateProp, el }] })\n        } else {\n          updateProp(value[key])\n        }\n      }\n    } else if (typeof value === 'string') el.style.cssText = value\n  } else if (name !== 'list' && name !== 'type' && !isSvg && name in el) {\n    // Attrib\n    // Attempt to set an attribute to the given value.\n    // IE & FF throw for certain property-value combinations.\n    try { updateAttrib(name, isSvg)(value, el) } catch (e) { /* */ }\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    updateAttrib(name, isSvg)(value, el)\n  }\n}\n\nexport default setDomAttrib\n","\nimport Collector from './Collector'\nimport setDomAttrib from './setDomAttrib'\nimport extend from './extend'\n\nfunction arr (e) {\n  return Array.isArray(e) ? e : [e]\n}\n\n// ---- RAW RENDERER ----\nfunction rawRender (vdom, isSvg) {\n  if (Array.isArray(vdom)) return renderArray(vdom, isSvg)\n  if (vdom instanceof window.Element) return renderDirectDom(vdom, isSvg)\n\n  if (\n    vdom === null ||\n\t\ttypeof vdom !== 'object' ||\n\t\t!vdom.vnode\n  ) return renderPrimitive(vdom, isSvg)\n\n  // one-level deep flatten children array\n  const props = extend(\n    extend({}, vdom.props),\n    { children: [].concat.apply([], vdom.children || []) }\n  )\n\n  if (vdom.isDom) return renderDom(vdom, props, isSvg)\n  if (vdom.isInstance) return renderClass(vdom, props, isSvg, true)\n  if (vdom.isStateless) return renderStateless(vdom, props, isSvg)\n  if (vdom.isComponent) return renderClass(vdom, props, isSvg)\n}\n\n// ---- ARRAY ----\nfunction renderArray (vdoms, isSvg) {\n  vdoms = arr(vdoms)\n  const collector = new Collector()\n  for (let i = 0; i < vdoms.length; i++) { collector.append(rawRender(vdoms[i], isSvg)) }\n  return collector.get()\n}\n\n// ---- PRIMITIVE ----\nfunction renderPrimitive (vdom) {\n  const collector = new Collector()\n\n  if (vdom === null || vdom === undefined || vdom === false) return collector.get()\n  collector.append({ nodes: document.createTextNode(vdom + '') })\n  return collector.get()\n}\n\n// ---- DOM ----\nfunction renderDom (vdom, props, isSvg) {\n  // Render and collect vdom's children\n  const collector = new Collector()\n  let domChildren = []\n\n  if (vdom.type === 'svg') isSvg = true\n\n  for (let i = 0; i < props.children.length; i++) {\n    const result = rawRender(props.children[i], isSvg)\n    if (result.nodes) {\n      domChildren = domChildren.concat(result.nodes)\n      collector.append({\n        components: result.components,\n        refs: result.refs,\n        domEvents: result.domEvents,\n        storeEvents: result.storeEvents\n      })\n    }\n  }\n\n  // Create dom element\n  const el = isSvg\n    ? document.createElementNS('http://www.w3.org/2000/svg', vdom.type)\n    : document.createElement(vdom.type)\n\n  for (const k in vdom.props) { setDomAttrib(el, k, vdom.props[k], collector, isSvg) }\n\n  for (let i = 0; i < domChildren.length; i++) { el.appendChild(domChildren[i]) }\n\n  if (props.ref) collector.append({ refs: { ref: el, fn: props.ref } })\n  collector.append({ nodes: el })\n\n  return collector.get()\n}\n\n// ---- DIRECT DOM ----\nfunction renderDirectDom (vdom) {\n  const collector = new Collector()\n  collector.append({ nodes: vdom })\n  return collector.get()\n}\n\n// ---- STATELESS ----\nfunction renderStateless (_vdom, props, isSvg) {\n  const collector = new Collector()\n  const vdom = _vdom.type(props)\n  collector.append(rawRender(vdom, isSvg))\n  return collector.get()\n}\n\n// ---- CLASS ----\nfunction renderClass (_vdom, props, isSvg, isInstance = false) {\n  const collector = new Collector()\n\n  // instanciate it and call beforeRender\n\tconst instance = isInstance ? _vdom.type : new _vdom.type(props) // eslint-disable-line\n  if (isInstance) props = instance.props\n\n  instance.beforeRender(props)\n\n  const vdom = instance.template(props, instance.state || {}) || props.children\n\n  // append its own ref ? not sur if I need to do this here or in the collector reset\n  if (props.ref) collector.append({ refs: { ref: instance, fn: props.ref } })\n  collector.append(rawRender(vdom, isSvg))\n\n  // create a useful \"base\" property\n  const nodes = collector.data.nodes\n  instance.base = nodes.length > 1 ? nodes : nodes[0]\n\n  // collect all sub refs / components and add them to the instance's own collector\n  // instance._collector = {}\n\n  for (const k in collector.data) {\n    if (k === 'nodes') continue\n    if (!instance._collector[k]) instance._collector[k] = []\n    instance._collector[k] = instance._collector[k]\n      .concat(collector.data[k])\n  }\n\n  // reset the collector (collector.components only contains the current instance)\n  // used for possible parents and for correct didmount / refs dispatching\n  collector.set({\n    components: [instance],\n    refs: [],\n    domEvents: [],\n    storeEvents: []\n  })\n\n  // add a parent \"private\" property to each sub-components\n  for (let i = 0; i < instance._collector.components.length; i++) {\n    instance._collector.components[i]._parent = instance\n  }\n\n  return collector.get()\n}\n\nexport default rawRender\n","export function dispatch (component, cb, topDown) {\n  const subs = component._collector && component._collector.components\n  if (topDown) cb(component)\n  if (subs) {\n    for (let i = 0; i < subs.length; i++) dispatch(subs[i], cb)\n  }\n  if (!topDown) cb(component)\n}\n\nfunction callRefs (component) {\n  for (let i = 0; i < component._collector.refs.length; i++) {\n    component._collector.refs[i].fn(component._collector.refs[i].ref)\n    // Is this really needed or a good thing ?\n    component._collector.refs[i].ref = null\n  }\n}\n\nfunction callStoreListeners (component) {\n  for (let i = 0; i < component._collector.storeEvents.length; i++) {\n    const event = component._collector.storeEvents[i]\n    const oldfn = event.fn\n\t\tevent.fn = function ( v ) { oldfn( v, event.el ) }; // eslint-disable-line\n    event.store.subscribe(event.fn)\n    if (event.init) event.fn(event.store.current)\n  }\n}\n\nfunction callDomListeners (component) {\n  if (component.test) console.log('call dom listeners', component._collector.domEvents)\n  for (let i = 0; i < component._collector.domEvents.length; i++) {\n    const event = component._collector.domEvents[i]\n    event.el.addEventListener(event.evt, event.fn)\n  }\n}\n\nexport function dispatchRefs (component) {\n  dispatch(component, callRefs)\n}\n\nexport function dispatchListeners (component) {\n  dispatch(component, callDomListeners)\n  dispatch(component, callStoreListeners)\n}\n","import rawRender from './utils/rawRender'\nimport { dispatchListeners, dispatchRefs, dispatch } from './utils/dispatch'\n\nconst SvgTagNames = new Set([\n  'g',\n  'svg',\n  'defs',\n  'mask'\n])\n\nexport default function render (vnode, parent = document.body, context) {\n  // render\n  let i = 0\n  const rendered = rawRender(vnode, parent && SvgTagNames.has(parent.tagName))\n\n  // dispatch callback refs\n  let mockComponent = { _collector: rendered } // for dispatch convenience\n  dispatchRefs(mockComponent)\n\n  // dispatch afterRender\n  dispatch(mockComponent, function (c) {\n    c.afterRender && c.afterRender(c.props)\n  })\n\n  // mount\n  if (typeof parent === 'function') {\n    const nodes = rendered.nodes.length < 2 ? rendered.nodes[0] : rendered.nodes\n    parent(nodes)\n  } else if (parent instanceof window.Element) {\n    for (i = 0; i < rendered.nodes.length; i++) {\n      parent.appendChild(rendered.nodes[i])\n    }\n  } else if (typeof parent === 'object' && parent !== null && parent.insertBefore) {\n    for (i = 0; i < rendered.nodes.length; i++) {\n      parent.insertBefore.parentNode.insertBefore(rendered.nodes[i], parent.insertBefore)\n    }\n  }\n\n  // This conditionnal avoids calling the dispatchers twice if\n  // the renders is made during before / after render\n  if (!context || context.mounted) {\n    // Dispatch listeners\n    dispatchListeners(mockComponent)\n\n    // dispatch afterMounts\n    dispatch(mockComponent, function (c) {\n      c.mounted = true\n      c.afterMount && c.afterMount(c.props)\n    })\n  }\n\n  // Add items to context\n  if (context && context._collector) {\n    const c = context._collector\n\n    for (i = 0; i < rendered.components.length; i++) {\n      rendered.components[i]._parent = context\n    }\n\n    if (c.refs) c.refs = c.refs.concat(rendered.refs)\n    if (c.components) c.components = c.components.concat(rendered.components)\n    if (c.domEvents) c.domEvents = c.domEvents.concat(rendered.domEvents)\n    if (c.storeEvents) c.storeEvents = c.storeEvents.concat(rendered.storeEvents)\n  }\n\n  mockComponent = undefined\n  return rendered\n}\n","import logger from '../utils/logger'\nimport _render from './render'\n\nexport default class Component {\n  static flatten (component) {\n    let children = []\n    for (const child of Array.isArray(component) ? component : (component.children ?? [])) {\n      children = children.concat(child, Component.flatten(child))\n    }\n    return children\n  }\n\n  constructor (props = {}) {\n    this._parent = null\n    this._collector = { refs: [], components: [], domEvents: [], storeEvents: [] }\n    this._storeListeners = []\n\n    this.refs = {}\n    this.state = {}\n    this.store = {}\n\n    // Contains all component properties and children.\n    // Do not modify it directly, recreate a new component using `cloneElement`\n    this.props = props || {}\n\n    // HTMLElement used as \"base\" for the component instance.\n    // Can also be an array of elements if `template` return an array.\n    this.base = null\n\n    // Set to true when component is mounted\n    this.mounted = false\n\n    // Set to true when component is destroyed\n    this.destroyed = false\n\n    const label = props.name || this.constructor.name || 'Component'\n    const { log, warn, error } = logger(\n      label,\n      'white',\n      '#000',\n      props.disableLog\n    )\n\n    this.log = log\n    this.warn = warn\n    this.error = error\n  }\n\n  get dataProps () {\n    return Object.entries(this.props)\n      .filter(([attr]) => attr.startsWith('data-'))\n      .reduce((acc, [attr, value]) => ({ ...acc, [attr]: value }), {})\n  }\n\n  storeSubscribe (store, method, context, init = true) {\n    store.subscribe(method, context)\n    this._storeListeners.push([store, method, context])\n    if (init) method.call(context, store.current)\n  }\n\n  // `component.template` will be called during the component\n  // initial rendering to create the `component.base` node\n  // You can return real dom or jsx\n  template () {}\n\n  // `component.beforeRender` will be called by `render`\n  // just before the component template rendering\n  beforeRender () {}\n\n  // `component.afterRender` will be called by `render`\n  // when all the rendered dom tree is rendered\n  afterRender () {}\n\n  // `component.afterMount` will be called by `render`\n  // when all the rendered dom tree is mounted\n  afterMount () {}\n\n  // `component.beforeDestroy` will be called\n  // when the component or one of its ancestors is destroyed\n  beforeDestroy () {}\n\n  // Quickly add ref to component\n  ref (k) {\n    const self = this\n    return function updateRef (el) {\n      self.refs[k] = el\n    }\n  }\n\n  // Quickly add ref to an array of component refs\n  refArray (k, poolable = false) {\n    const arr = this.refs[k] || (this.refs[k] = [])\n    let index = arr.length\n    let pools, pool\n\n    if (poolable) {\n      pools = this.refs.__pools || (this.refs.__pools = {})\n      pool = pools[k] || (pools[k] = [])\n      if (pool.length) index = pool.pop()\n    }\n\n    arr[index] = null\n\n    return function updateRefArray (el) {\n      arr[index] = el\n      if (poolable) pool.push(index)\n    }\n  }\n\n  // Quickly add ref to a hashmap of component refs\n  refMap (id, k) {\n    const map = this.refs[k] || (this.refs[k] = new Map())\n    return function updateRefHashmap (el) {\n      if (el) map.set(id, el)\n      else map.delete(id)\n    }\n  }\n\n  // Render a vnode or array of vnodes\n  // and register the rendered content as \"child\" of this component.\n  // Use this method when you want to add content to the component\n  // after the initial rendering. This ensures new items will be\n  // correctly unmount when the component is destroyed.\n  render (vdom, parent) {\n    return _render(vdom, parent, this)\n  }\n\n  // Destroy the component and its children components.\n  // - This also removes component props and de-reference it from its parent.\n  // - Callback refs inside the component tree will be re-called with `null`\n  // - Set component.mounted to false\n  destroy () {\n    let i = 0\n    this.beforeDestroy(this.props)\n\n    // Unlisten to dom events\n    for (i = this._collector.domEvents.length - 1; i >= 0; i--) {\n      const event = this._collector.domEvents[i]\n      event.el.removeEventListener(event.evt, event.fn)\n    }\n\n    // Unlisten to store events\n    for (i = this._collector.storeEvents.length - 1; i >= 0; i--) {\n      const event = this._collector.storeEvents[i]\n      event.store.unsubscribe(event.fn)\n    }\n\n    // Unlisten to store events 2\n    for (i = this._storeListeners.length - 1; i >= 0; i--) {\n      const event = this._storeListeners[i]\n      event[0].unsubscribe(event[1], event[2])\n    }\n\n    // destroy subcomponents\n    for (i = this._collector.components.length - 1; i >= 0; i--) {\n      this._collector.components[i].destroy()\n    }\n\n    this.mounted = false\n    this.destroyed = true\n\n    // unregister component from parent and dispose _parent\n    if (this._parent) {\n      const index = this._parent._collector.components.indexOf(this)\n      if (~index) this._parent._collector.components.splice(index, 1)\n      this._parent = null\n    }\n\n    // callback all ref with null and destroy them from the collector\n    for (i = this._collector.refs.length - 1; i >= 0; i--) {\n      this._collector.refs[i].fn(null)\n      this._collector.refs.splice(i, 1)\n    }\n\n    // Unmount from dom\n    let base = Array.isArray(this.base) ? this.base : [this.base]\n    for (i = 0; i < base.length; i++) {\n      if (base[i] && base[i].parentNode) base[i].parentNode.removeChild(base[i])\n    }\n\n    // Remove base\n    this.base = base = null\n\n    // Remove props / state / store / refs to avoid memory leaks\n    this.props = null\n    this.state = null\n    this.store = null\n    this.refs = null\n    this._storeListeners = null\n  }\n}\n"],"names":["h","type","props","vn","p","extend","obj","nObj","i","noop","logger","prefix","color","background","mute","pre","style","TYPES","Collector","k","namespaces","doubleAttr","isSignal","value","val","startsWith","str","w","updateClass","n","v","el","updateAttrib","name","isSvg","setDomAttrib","collector","len","eventName","evts","events","l","evt","store","fn","init","className","attrib","eventType","key","updateProp","arr","e","rawRender","vdom","renderArray","renderDirectDom","renderPrimitive","renderDom","renderClass","renderStateless","vdoms","domChildren","result","_vdom","isInstance","instance","nodes","dispatch","component","cb","topDown","subs","callRefs","callStoreListeners","event","oldfn","callDomListeners","dispatchRefs","dispatchListeners","SvgTagNames","render","vnode","parent","context","rendered","mockComponent","c","Component","children","child","label","log","warn","error","attr","acc","method","self","poolable","index","pools","pool","id","map","_render","base"],"mappings":"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"}