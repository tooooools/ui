{"version":3,"file":"Button-01764f60.js","sources":["../../lib/components/Button.jsx"],"sourcesContent":["import style from './Button.module.scss'\n\nimport { Component } from '../jsx'\nimport { ensure, writable } from '../state'\n\nimport noop from '../utils/noop'\n\nexport default class Button extends Component {\n  beforeRender (props) {\n    this.handleClick = this.handleClick.bind(this)\n\n    this.state = {\n      label: ensure(writable)(props['store-label'], props.label),\n      title: ensure(writable)(props['store-title'], props.title),\n      icon: ensure(writable)(props['store-icon'], props.icon),\n\n      active: ensure(writable)(props['store-active'], props.active),\n      disabled: ensure(writable)(props['store-disabled'], props.disabled),\n      hidden: ensure(writable)(props['store-hidden'], props.hidden),\n      waiting: ensure(writable)(props['store-waiting'], props.waiting)\n    }\n  }\n\n  template (props, state) {\n    return (\n      <button\n        {...this.dataProps}\n        type={props.type}\n        id={props.id}\n        tabIndex={props.tabindex}\n        class={[\n          style.button,\n          {\n            'has-click': Boolean(this.props['event-click']),\n            'has-icon': state.icon,\n            'is-active': state.active,\n            'is-disabled': state.disabled,\n            'is-hidden': state.hidden,\n            'is-waiting': state.waiting\n          },\n          ...(Array.isArray(props.class) ? props.class : [props.class])\n        ]}\n        store-title={state.title}\n        store-disabled={state.disabled}\n        event-click={this.handleClick}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n      >\n        <span\n          ref={this.ref('icon')}\n          class={style.button__icon}\n          store-innerHTML={state.icon}\n        />\n        <label class={style.button__label} store-innerHTML={state.label} />\n        {props.children}\n      </button>\n    )\n  }\n\n  async handleClick (e) {\n    if (!this.props['event-click']) return\n    if (this.state.disabled.get()) return\n\n    this.base.blur()\n    if (this.state.waiting.get()) return e.preventDefault()\n    this.state.waiting.set(true)\n\n    try {\n      await this.props['event-click'](e, this)\n    } finally {\n      // Testing for mounted because event-click may have destroyed this component\n      if (this.mounted) {\n        this.state.waiting.set(false)\n\n        // Trigger animation on .button__icon if any\n        if (this && this.refs && this.refs.icon) {\n          this.refs.icon.style.animation = 'none'\n          void this.refs.icon.offsetHeight // eslint-disable-line no-void\n          this.refs.icon.style.animation = null\n        }\n      }\n    }\n  }\n}\n"],"names":["Button","Component","props","ensure","writable","state","h","style","e","noop"],"mappings":"8XAOA,MAAqBA,UAAeC,CAAU,CAC5C,aAAcC,EAAO,CACnB,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAE7C,KAAK,MAAQ,CACX,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,KAAMC,EAAOC,CAAQ,EAAEF,EAAM,YAAY,EAAGA,EAAM,IAAI,EAEtD,OAAQC,EAAOC,CAAQ,EAAEF,EAAM,cAAc,EAAGA,EAAM,MAAM,EAC5D,SAAUC,EAAOC,CAAQ,EAAEF,EAAM,gBAAgB,EAAGA,EAAM,QAAQ,EAClE,OAAQC,EAAOC,CAAQ,EAAEF,EAAM,cAAc,EAAGA,EAAM,MAAM,EAC5D,QAASC,EAAOC,CAAQ,EAAEF,EAAM,eAAe,EAAGA,EAAM,OAAO,CAAA,CAEnE,CAEA,SAAUA,EAAOG,EAAO,CAEpB,OAAAC,EAAC,SAAA,CACE,GAAG,KAAK,UACT,KAAMJ,EAAM,KACZ,GAAIA,EAAM,GACV,SAAUA,EAAM,SAChB,MAAO,CACLK,EAAM,OACN,CACE,YAAa,EAAQ,KAAK,MAAM,aAAa,EAC7C,WAAYF,EAAM,KAClB,YAAaA,EAAM,OACnB,cAAeA,EAAM,SACrB,YAAaA,EAAM,OACnB,aAAcA,EAAM,OACtB,EACA,GAAI,MAAM,QAAQH,EAAM,KAAK,EAAIA,EAAM,MAAQ,CAACA,EAAM,KAAK,CAC7D,EACA,cAAaG,EAAM,MACnB,iBAAgBA,EAAM,SACtB,cAAa,KAAK,YAClB,mBAAwBG,IAAAN,EAAM,kBAAkB,GAAKO,GAAMD,EAAG,IAAI,EAClE,mBAAwBA,IAAAN,EAAM,kBAAkB,GAAKO,GAAMD,EAAG,IAAI,CAAA,EAElEF,EAAC,OAAA,CACC,IAAK,KAAK,IAAI,MAAM,EACpB,MAAOC,EAAM,aACb,kBAAiBF,EAAM,IAAA,CACzB,IACC,QAAM,CAAA,MAAOE,EAAM,cAAe,kBAAiBF,EAAM,MAAO,EAChEH,EAAM,QAAA,CAGb,CAEA,MAAM,YAAaM,EAAG,CAChB,GAAC,KAAK,MAAM,aAAa,GACzB,MAAK,MAAM,SAAS,IAAI,EAGxB,IADJ,KAAK,KAAK,OACN,KAAK,MAAM,QAAQ,IAAI,EAAG,OAAOA,EAAE,iBAClC,KAAA,MAAM,QAAQ,IAAI,EAAI,EAEvB,GAAA,CACF,MAAM,KAAK,MAAM,aAAa,EAAEA,EAAG,IAAI,CAAA,QACvC,CAEI,KAAK,UACF,KAAA,MAAM,QAAQ,IAAI,EAAK,EAGxB,MAAQ,KAAK,MAAQ,KAAK,KAAK,OAC5B,KAAA,KAAK,KAAK,MAAM,UAAY,OAC5B,KAAK,KAAK,KAAK,aACf,KAAA,KAAK,KAAK,MAAM,UAAY,MAGvC,EACF,CACF"}