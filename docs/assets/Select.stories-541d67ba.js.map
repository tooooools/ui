{"version":3,"file":"Select.stories-541d67ba.js","sources":["../../node_modules/iconoir/icons/nav-arrow-down.svg?raw","../../lib/components/Select.jsx"],"sourcesContent":["export default \"<svg width=\\\"24\\\" height=\\\"24\\\" stroke-width=\\\"1.5\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n<path d=\\\"M6 9L12 15L18 9\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/>\\n</svg>\\n\"","import style from './Select.module.scss'\n\nimport { Component } from '../jsx'\nimport { ensure, writable } from '../state'\n\nimport noop from '../utils/noop'\nimport classnames from 'classnames'\n\nimport IconDown from 'iconoir/icons/nav-arrow-down.svg?raw'\n\nconst PLACEHOLDER_VALUE = Symbol('select-placeholder-value')\n\nexport default class Select extends Component {\n  static get separator () {\n    return { value: Symbol('separator'), label: '', disabled: true }\n  }\n\n  static placeholder (label = 'select') {\n    return { value: PLACEHOLDER_VALUE, label, disabled: true }\n  }\n\n  beforeRender (props) {\n    this.update = this.update.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n\n    this.state = {\n      title: ensure(writable)(props['store-title'], props.title),\n\n      value: ensure(writable)(props['store-value'], props.value ?? PLACEHOLDER_VALUE),\n      options: ensure(writable)(props['store-options'], props.options),\n\n      disabled: ensure(writable)(props['store-disabled'], props.disabled),\n      hidden: ensure(writable)(props['store-hidden'], props.hidden)\n    }\n  }\n\n  template (props, state) {\n    return (\n      <div\n        id={props.id}\n        class={classnames(style.select, props.class)}\n        store-class-is-disabled={state.disabled}\n        store-class-is-hidden={state.hidden}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n      >\n        {props.icon && (\n          <span\n            ref={this.ref('icon')}\n            class={style.select__icon}\n            innerHTML={props.icon}\n          />\n        )}\n        <select\n          ref={this.ref('select')}\n          store-title={state.title}\n          store-disabled={state.disabled}\n          event-change={this.handleChange}\n        />\n        <span class={style.select__arrow} innerHTML={IconDown} />\n      </div>\n    )\n  }\n\n  afterRender () {\n    this.state.value.subscribe(this.update)\n    this.state.options.subscribe(this.update)\n    this.update()\n  }\n\n  clear () {\n    this.refs.select.innerHTML = ''\n  }\n\n  update () {\n    this.clear()\n\n    const options = this.state.options.get()\n    if (!options) return\n\n    this.render((\n      options.map(({ value, label, disabled } = {}) => (\n        <option\n          value={value}\n          disabled={disabled}\n          selected={value === this.state.value.current}\n        >\n          {label ?? value}\n        </option>\n      ))\n    ), this.refs.select)\n  }\n\n  handleChange (e) {\n    this.state.value.set(e.target.value)\n    ;(this.props['event-change'] || noop)(e, this)\n  }\n\n  beforeDestroy () {\n    this.state.value.unsubscribe(this.update)\n    this.state.options.unsubscribe(this.update)\n  }\n}\n"],"names":["IconDown","PLACEHOLDER_VALUE","Select","Component","label","props","ensure","writable","state","h","classnames","style","e","noop","options","value","disabled"],"mappings":"gYAAeA,EAAA;AAAA;AAAA;AAAA,ECUTC,EAAoB,OAAO,0BAA0B,EAE3D,MAAqBC,UAAeC,CAAU,CAC5C,WAAW,WAAa,CACf,MAAA,CAAE,MAAO,OAAO,WAAW,EAAG,MAAO,GAAI,SAAU,GAC5D,CAEA,OAAO,YAAaC,EAAQ,SAAU,CACpC,MAAO,CAAE,MAAOH,EAAmB,MAAAG,EAAO,SAAU,EAAK,CAC3D,CAEA,aAAcC,EAAO,CACnB,KAAK,OAAS,KAAK,OAAO,KAAK,IAAI,EACnC,KAAK,aAAe,KAAK,aAAa,KAAK,IAAI,EAE/C,KAAK,MAAQ,CACX,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EAEzD,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,OAASJ,CAAiB,EAC9E,QAASK,EAAOC,CAAQ,EAAEF,EAAM,eAAe,EAAGA,EAAM,OAAO,EAE/D,SAAUC,EAAOC,CAAQ,EAAEF,EAAM,gBAAgB,EAAGA,EAAM,QAAQ,EAClE,OAAQC,EAAOC,CAAQ,EAAEF,EAAM,cAAc,EAAGA,EAAM,MAAM,CAAA,CAEhE,CAEA,SAAUA,EAAOG,EAAO,CAEpB,OAAAC,EAAC,MAAA,CACC,GAAIJ,EAAM,GACV,MAAOK,EAAWC,EAAM,OAAQN,EAAM,KAAK,EAC3C,0BAAyBG,EAAM,SAC/B,wBAAuBA,EAAM,OAC7B,mBAAwBI,IAAAP,EAAM,kBAAkB,GAAKQ,GAAMD,EAAG,IAAI,EAClE,mBAAwBA,IAAAP,EAAM,kBAAkB,GAAKQ,GAAMD,EAAG,IAAI,CAAA,EAEjEP,EAAM,MACLI,EAAC,OAAA,CACC,IAAK,KAAK,IAAI,MAAM,EACpB,MAAOE,EAAM,aACb,UAAWN,EAAM,IAAA,CACnB,EAEFI,EAAC,SAAA,CACC,IAAK,KAAK,IAAI,QAAQ,EACtB,cAAaD,EAAM,MACnB,iBAAgBA,EAAM,SACtB,eAAc,KAAK,YAAA,CACrB,IACC,OAAK,CAAA,MAAOG,EAAM,cAAe,UAAWX,EAAU,CAAA,CAG7D,CAEA,aAAe,CACb,KAAK,MAAM,MAAM,UAAU,KAAK,MAAM,EACtC,KAAK,MAAM,QAAQ,UAAU,KAAK,MAAM,EACxC,KAAK,OAAO,CACd,CAEA,OAAS,CACF,KAAA,KAAK,OAAO,UAAY,EAC/B,CAEA,QAAU,CACR,KAAK,MAAM,EAEX,MAAMc,EAAU,KAAK,MAAM,QAAQ,IAAI,EAClCA,GAEA,KAAA,OACHA,EAAQ,IAAI,CAAC,CAAE,MAAAC,EAAO,MAAAX,EAAO,SAAAY,GAAa,CAAA,IACxCP,EAAC,SAAA,CACC,MAAAM,EACA,SAAAC,EACA,SAAUD,IAAU,KAAK,MAAM,MAAM,OAAA,EAEpCX,GAASW,CAEb,CAAA,EACA,KAAK,KAAK,MAAM,CACrB,CAEA,aAAc,EAAG,CACf,KAAK,MAAM,MAAM,IAAI,EAAE,OAAO,KAAK,GACjC,KAAK,MAAM,cAAc,GAAKF,GAAM,EAAG,IAAI,CAC/C,CAEA,eAAiB,CACf,KAAK,MAAM,MAAM,YAAY,KAAK,MAAM,EACxC,KAAK,MAAM,QAAQ,YAAY,KAAK,MAAM,CAC5C,CACF;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[0]}