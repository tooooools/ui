{"version":3,"file":"Toggles-95a17bd0.js","sources":["../../lib/components/Toggles.jsx"],"sourcesContent":["import style from './Toggles.module.scss'\n\nimport { Component } from '../jsx'\nimport { ensure, writable } from '../state'\n\nimport noop from '../utils/noop'\n\nimport Button from './Button'\n\nexport default class Toggles extends Component {\n  beforeRender (props) {\n    this.update = this.update.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n\n    this.state = {\n      title: ensure(writable)(props['store-title'], props.title),\n\n      value: ensure(writable)(props['store-value'], props.value),\n      options: ensure(writable)(props['store-options'], props.options ?? []),\n\n      disabled: ensure(writable)(props['store-disabled'], props.disabled),\n      hidden: ensure(writable)(props['store-hidden'], props.hidden)\n    }\n  }\n\n  template (props, state) {\n    return (\n      <div\n        {...this.dataProps}\n        id={props.id}\n        class={[\n          style.toggles,\n          {\n            'is-disabled': state.disabled,\n            'is-hidden': state.hidden\n          },\n          ...(Array.isArray(props.class) ? props.class : [props.class])\n        ]}\n        store-title={state.title}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n      />\n    )\n  }\n\n  afterRender () {\n    this.state.value.subscribe(this.update)\n    this.state.options.subscribe(this.update)\n    this.update()\n  }\n\n  clear () {\n    if (!this.refs.buttons) return\n    this.refs.buttons.forEach(button => button?.destroy())\n    delete this.refs.buttons\n  }\n\n  update () {\n    this.clear()\n\n    const options = this.state.options.get()\n    if (!options) return\n\n    this.render((\n      options.map(({ icon, value, label, disabled, hidden } = {}, index) => (\n        <Button\n          ref={this.refArray('buttons')}\n          icon={icon}\n          store-label={label ?? value ?? index}\n          store-active={(value ?? index) === this.state.value.current}\n          store-disabled={disabled}\n          store-hidden={hidden}\n          event-click={this.handleChange(value ?? index)}\n        />\n      ))\n    ), this.base)\n  }\n\n  handleChange (value) {\n    return e => {\n      this.state.value.set(value)\n      ;(this.props['event-change'] || noop)(e, this)\n    }\n  }\n\n  beforeDestroy () {\n    this.state.value.unsubscribe(this.update)\n    this.state.options.unsubscribe(this.update)\n  }\n}\n"],"names":["Toggles","Component","props","ensure","writable","state","style","e","noop","button","options","icon","value","label","disabled","hidden","index","Button"],"mappings":"0OASA,MAAqBA,UAAgBC,CAAU,CAC7C,aAAcC,EAAO,CACnB,KAAK,OAAS,KAAK,OAAO,KAAK,IAAI,EACnC,KAAK,aAAe,KAAK,aAAa,KAAK,IAAI,EAE/C,KAAK,MAAQ,CACX,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EAEzD,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,QAASC,EAAOC,CAAQ,EAAEF,EAAM,eAAe,EAAGA,EAAM,SAAW,EAAE,EAErE,SAAUC,EAAOC,CAAQ,EAAEF,EAAM,gBAAgB,EAAGA,EAAM,QAAQ,EAClE,OAAQC,EAAOC,CAAQ,EAAEF,EAAM,cAAc,EAAGA,EAAM,MAAM,CAAA,CAEhE,CAEA,SAAUA,EAAOG,EAAO,CAEpB,OAAA,EAAC,MAAA,CACE,GAAG,KAAK,UACT,GAAIH,EAAM,GACV,MAAO,CACLI,EAAM,QACN,CACE,cAAeD,EAAM,SACrB,YAAaA,EAAM,MACrB,EACA,GAAI,MAAM,QAAQH,EAAM,KAAK,EAAIA,EAAM,MAAQ,CAACA,EAAM,KAAK,CAC7D,EACA,cAAaG,EAAM,MACnB,mBAAwBE,IAAAL,EAAM,kBAAkB,GAAKM,GAAMD,EAAG,IAAI,EAClE,mBAAwBA,IAAAL,EAAM,kBAAkB,GAAKM,GAAMD,EAAG,IAAI,CAAA,CAAA,CAGxE,CAEA,aAAe,CACb,KAAK,MAAM,MAAM,UAAU,KAAK,MAAM,EACtC,KAAK,MAAM,QAAQ,UAAU,KAAK,MAAM,EACxC,KAAK,OAAO,CACd,CAEA,OAAS,CACF,KAAK,KAAK,UACf,KAAK,KAAK,QAAQ,QAAkBE,GAAAA,GAAA,YAAAA,EAAQ,SAAS,EACrD,OAAO,KAAK,KAAK,QACnB,CAEA,QAAU,CACR,KAAK,MAAM,EAEX,MAAMC,EAAU,KAAK,MAAM,QAAQ,IAAI,EAClCA,GAEL,KAAK,OACHA,EAAQ,IAAI,CAAC,CAAE,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,OAAAC,CAAW,EAAA,GAAIC,IAC1D,EAACC,EAAA,CACC,IAAK,KAAK,SAAS,SAAS,EAC5B,KAAAN,EACA,cAAaE,GAASD,GAASI,EAC/B,gBAAeJ,GAASI,KAAW,KAAK,MAAM,MAAM,QACpD,iBAAgBF,EAChB,eAAcC,EACd,cAAa,KAAK,aAAaH,GAASI,CAAK,CAAA,CAAA,CAEhD,EACA,KAAK,IAAI,CACd,CAEA,aAAcJ,EAAO,CACnB,OAAYL,GAAA,CACL,KAAA,MAAM,MAAM,IAAIK,CAAK,GACxB,KAAK,MAAM,cAAc,GAAKJ,GAAMD,EAAG,IAAI,CAAA,CAEjD,CAEA,eAAiB,CACf,KAAK,MAAM,MAAM,YAAY,KAAK,MAAM,EACxC,KAAK,MAAM,QAAQ,YAAY,KAAK,MAAM,CAC5C,CACF"}