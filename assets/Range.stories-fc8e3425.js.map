{"version":3,"file":"Range.stories-fc8e3425.js","sources":["../../node_modules/debounce/index.js","../../lib/components/Range.jsx"],"sourcesContent":["/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import style from './Range.module.scss'\n\nimport { Component } from '../jsx'\nimport { ensure, derived, writable } from '../state'\n\nimport noop from '../utils/noop'\nimport { debounce } from 'debounce'\n\nexport default class Range extends Component {\n  beforeRender (props) {\n    this.handleInput = props.debounce\n      ? debounce(this.handleInput.bind(this), props.debounce)\n      : this.handleInput.bind(this)\n\n    this.state = {\n      label: ensure(writable)(props['store-label'], props.label),\n      title: ensure(writable)(props['store-title'], props.title),\n\n      value: ensure(writable)(props['store-value'], props.value),\n      min: ensure(writable)(props['store-min'], props.min),\n      max: ensure(writable)(props['store-max'], props.max),\n      step: ensure(writable)(props['store-step'], props.step),\n\n      disabled: ensure(writable)(props['store-disabled'], props.disabled),\n      hidden: ensure(writable)(props['store-hidden'], props.hidden)\n    }\n  }\n\n  template (props, state) {\n    return (\n      <div\n        {...this.dataProps}\n        id={props.id}\n        class={[\n          style.range,\n          {\n            'is-dual': props.dual,\n            'is-disabled': state.disabled,\n            'is-hidden': state.hidden\n          },\n          ...(Array.isArray(props.class) ? props.class : [props.class])\n        ]}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n      >\n        {props.icon && (\n          <span\n            ref={this.ref('icon')}\n            class={style.range__icon}\n            innerHTML={props.icon}\n          />\n        )}\n        <div class={style.range__inputs}>\n          <input\n            ref={this.refArray('inputs')}\n            tabIndex={props.tabindex}\n            type='range'\n            store-min={state.min}\n            store-max={state.max}\n            store-step={state.step}\n            store-title={state.title}\n            store-value={derived(state.value, value => props.dual ? (value ?? [])[0] : value)}\n            store-disabled={state.disabled}\n            event-input={this.handleInput}\n          />\n          {props.dual && (\n            <input\n              ref={this.refArray('inputs')}\n              tabIndex={props.tabindex}\n              type='range'\n              store-min={state.min}\n              store-max={state.max}\n              store-step={state.step}\n              store-title={state.title}\n              store-value={derived(state.value, value => props.dual ? (value ?? [])[1] : value)}\n              store-disabled={state.disabled}\n              event-input={this.handleInput}\n            />\n          )}\n        </div>\n        <label class={style.range__label} store-innerHTML={state.label} />\n      </div>\n    )\n  }\n\n  async handleInput (e) {\n    if (this.props.dual) this.state.value.set([+this.refs.inputs[0].value, +this.refs.inputs[1].value])\n    else this.state.value.set(+this.refs.inputs[0].value)\n\n    await (this.props['event-input'] ?? noop)(e, this)\n  }\n}\n"],"names":["debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","debounced","callNow","debounce_1","Range","Component","props","ensure","writable","state","h","style","e","noop","derived","value"],"mappings":"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","x_google_ignoreList":[0]}