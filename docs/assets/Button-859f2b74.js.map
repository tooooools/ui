{"version":3,"file":"Button-859f2b74.js","sources":["../../lib/components/Button.jsx"],"sourcesContent":["import style from './Button.module.scss'\n\nimport { Component } from '../jsx'\nimport { ensure, writable } from '../state'\n\nimport noop from '../utils/noop'\nimport classnames from 'classnames'\n\nexport default class Button extends Component {\n  beforeRender (props) {\n    this.handleClick = this.handleClick.bind(this)\n\n    this.state = {\n      label: ensure(writable)(props['store-label'], props.label),\n      title: ensure(writable)(props['store-title'], props.title),\n      icon: ensure(writable)(props['store-icon'], props.icon),\n\n      active: ensure(writable)(props['store-active'], props.active),\n      disabled: ensure(writable)(props['store-disabled'], props.disabled),\n      hidden: ensure(writable)(props['store-hidden'], props.hidden),\n      waiting: ensure(writable)(props['store-waiting'], props.waiting)\n    }\n  }\n\n  template (props, state) {\n    return (\n      <button\n        type={props.type}\n        id={props.id}\n        class={classnames(style.button, props.class)}\n        store-title={state.title}\n        store-class-has-icon={state.icon}\n        store-class-is-active={state.active}\n        store-class-is-disabled={state.disabled}\n        store-class-is-hidden={state.hidden}\n        store-class-is-waiting={state.waiting}\n        event-click={this.handleClick}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n      >\n        <span\n          ref={this.ref('icon')}\n          class={style.button__icon}\n          store-innerHTML={state.icon}\n        />\n        <label class={style.button__label} store-text={state.label} />\n      </button>\n    )\n  }\n\n  async handleClick (e) {\n    this.base.blur()\n\n    if (this.state.waiting.get()) return e.preventDefault()\n\n    this.state.waiting.set(true)\n    await (this.props['event-click'] ?? noop)(e, this)\n\n    // Testing for mounted because event-click may have destroyed this component\n    if (!this.mounted) return\n    this.state.waiting.set(false)\n\n    // Trigger animation on .button__icon if any\n    if (this && this.refs && this.refs.icon) {\n      this.refs.icon.style.animation = 'none'\n      void this.refs.icon.offsetHeight // eslint-disable-line no-void\n      this.refs.icon.style.animation = null\n    }\n  }\n}\n"],"names":["Button","Component","props","ensure","writable","state","h","classnames","style","e","noop"],"mappings":"8YAQA,MAAqBA,UAAeC,CAAU,CAC5C,aAAcC,EAAO,CACnB,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAE7C,KAAK,MAAQ,CACX,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,MAAOC,EAAOC,CAAQ,EAAEF,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,KAAMC,EAAOC,CAAQ,EAAEF,EAAM,YAAY,EAAGA,EAAM,IAAI,EAEtD,OAAQC,EAAOC,CAAQ,EAAEF,EAAM,cAAc,EAAGA,EAAM,MAAM,EAC5D,SAAUC,EAAOC,CAAQ,EAAEF,EAAM,gBAAgB,EAAGA,EAAM,QAAQ,EAClE,OAAQC,EAAOC,CAAQ,EAAEF,EAAM,cAAc,EAAGA,EAAM,MAAM,EAC5D,QAASC,EAAOC,CAAQ,EAAEF,EAAM,eAAe,EAAGA,EAAM,OAAO,CAAA,CAEnE,CAEA,SAAUA,EAAOG,EAAO,CAEpB,OAAAC,EAAC,SAAA,CACC,KAAMJ,EAAM,KACZ,GAAIA,EAAM,GACV,MAAOK,EAAWC,EAAM,OAAQN,EAAM,KAAK,EAC3C,cAAaG,EAAM,MACnB,uBAAsBA,EAAM,KAC5B,wBAAuBA,EAAM,OAC7B,0BAAyBA,EAAM,SAC/B,wBAAuBA,EAAM,OAC7B,yBAAwBA,EAAM,QAC9B,cAAa,KAAK,YAClB,mBAAwBI,IAAAP,EAAM,kBAAkB,GAAKQ,GAAMD,EAAG,IAAI,EAClE,mBAAwBA,IAAAP,EAAM,kBAAkB,GAAKQ,GAAMD,EAAG,IAAI,CAAA,EAElEH,EAAC,OAAA,CACC,IAAK,KAAK,IAAI,MAAM,EACpB,MAAOE,EAAM,aACb,kBAAiBH,EAAM,IAAA,CACzB,IACC,QAAM,CAAA,MAAOG,EAAM,cAAe,aAAYH,EAAM,MAAO,CAAA,CAGlE,CAEA,MAAM,YAAaI,EAAG,CAGhB,GAFJ,KAAK,KAAK,OAEN,KAAK,MAAM,QAAQ,IAAI,EAAG,OAAOA,EAAE,iBAElC,KAAA,MAAM,QAAQ,IAAI,EAAI,EAC3B,MAAO,KAAK,MAAM,aAAa,GAAKC,GAAMD,EAAG,IAAI,EAG5C,KAAK,UACL,KAAA,MAAM,QAAQ,IAAI,EAAK,EAGxB,MAAQ,KAAK,MAAQ,KAAK,KAAK,OAC5B,KAAA,KAAK,KAAK,MAAM,UAAY,OAC5B,KAAK,KAAK,KAAK,aACf,KAAA,KAAK,KAAK,MAAM,UAAY,MAErC,CACF"}