"use strict";function A(t,e){const n={};return n.vnode=!0,n.type=t,n.props=e||{},n.children=[].concat.apply([],[].slice.call(arguments,2)),n.isInstance=t&&t.template&&typeof t.template=="function",n.isComponent=typeof t=="function"&&t.prototype&&typeof t.prototype.render=="function",n.isStateless=typeof t=="function"&&!n.isComponent,n.isDom=typeof t=="string",n}A.f=t=>t.children;function g(t,e){for(const n in e)t[n]=e[n];return t}function _(){}function R(t,e,n,s){if(s)return{log:_,warn:_,error:_};const o=[];t=t.toUpperCase(),o.push(`%c ${t} `);let r="font-weight:bold;";return e&&(r+=`color:${e};`),n&&(r+=`background-color:${n}`),o.push(r),{log:console.log.bind(console,...o),warn:console.warn.bind(console,...o),error:console.error.bind(console,...o)}}const w=["nodes","components","refs","domEvents","storeEvents"];class d{constructor(){this.data={};for(let e=0;e<w.length;e++)this.data[w[e]]=[]}append(e){for(const n in e)this.data[n]=this.data[n].concat(e[n])}set(e){for(const n in e)this.data[n]=e[n]}get(){return this.data}}const p=["xlink","xmlns","xml"],D=new Set(["placeholder","autoplay","muted","for","webkit-playsinline","playsinline","selected"]);let y;const f=(t,e)=>t.substr(0,e.length)===e,k=t=>(e,n)=>n.classList.toggle(t,e||!1),b=(t="textContent",e)=>(n,s)=>{if(e&&t!==(t=t.replace(/^xlink:?/,"")))s.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n);else{if(n===void 0){s.removeAttribute(t);return}y=n??"",e||(s[t]=y),(e||D.has(t)||f(t,"data-"))&&s.setAttribute(t,y)}};function x(t,e,n,s,o){if(n!==void 0&&!(e==="__self"||e==="__source")){e==="className"&&(e="class");for(let r=0;r<p.length;r++)if(f(e,p[r])){const i=p[r].length;e[i]&&e[i]!==":"&&(e=p[r]+":"+e[i].toLowerCase()+e.substr(i+1,e.length));break}if(e!=="ref"){if(f(e,"event-")){const r=e.toLowerCase().substring(6);s.append({domEvents:[{el:t,evt:r,fn:n}]})}else if(e==="store"){const r=Array.isArray(n)?n:[n],i=[];for(let c=0,l=r.length;c<l;c++){const h=Array.isArray(r[c])?r[c]:[r[c]],E=h[0],N=h[1],m=h[2]!==void 0?h[2]:!0;E&&i.push({store:E,fn:N,init:m,el:t})}s.append({storeEvents:i})}else if(f(e,"store-class-")){const r=e.substring(12),i=k(r);s.append({storeEvents:[{store:n,init:!0,fn:i,el:t}]})}else if(f(e,"store-")){let r=e.substring(6);r==="text"&&(r="textContent");const i=b(r,o);s.append({storeEvents:[{store:n,init:!0,fn:i,el:t}]})}else if(!(typeof n=="function"&&f(e,"on")))if(e==="class"&&!o)t.className=n||"";else if(e==="style")typeof n=="object"?g(t.style,n):typeof n=="string"&&(t.style.cssText=n);else if(e!=="list"&&e!=="type"&&!o&&e in t)try{b(e,o)(n,t)}catch{}else typeof n!="object"&&typeof n!="function"&&b(e,o)(n,t)}}}function M(t){return Array.isArray(t)?t:[t]}function a(t,e){if(Array.isArray(t))return B(t,e);if(t instanceof window.Element)return $(t);if(t===null||typeof t!="object"||!t.vnode)return T(t);const n=g(g({},t.props),{children:[].concat.apply([],t.children||[])});if(t.isDom)return P(t,n,e);if(t.isInstance)return C(t,n,e,!0);if(t.isStateless)return W(t,n,e);if(t.isComponent)return C(t,n,e)}function B(t,e){t=M(t);const n=new d;for(let s=0;s<t.length;s++)n.append(a(t[s],e));return n.get()}function T(t){const e=new d;return t==null||t===!1||e.append({nodes:document.createTextNode(t+"")}),e.get()}function P(t,e,n){const s=new d;let o=[];t.type==="svg"&&(n=!0);for(let i=0;i<e.children.length;i++){const c=a(e.children[i],n);c.nodes&&(o=o.concat(c.nodes),s.append({components:c.components,refs:c.refs,domEvents:c.domEvents,storeEvents:c.storeEvents}))}const r=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(const i in t.props)x(r,i,t.props[i],s,n);for(let i=0;i<o.length;i++)r.appendChild(o[i]);return e.ref&&s.append({refs:{ref:r,fn:e.ref}}),s.append({nodes:r}),s.get()}function $(t){const e=new d;return e.append({nodes:t}),e.get()}function W(t,e,n){const s=new d,o=t.type(e);return s.append(a(o,n)),s.get()}function C(t,e,n,s=!1){const o=new d,r=s?t.type:new t.type(e);s&&(e=r.props),r.beforeRender(e);const i=r.template(e,r.state||{})||e.children;e.ref&&o.append({refs:{ref:r,fn:e.ref}}),o.append(a(i,n));const c=o.data.nodes;r.base=c.length>1?c:c[0];for(const l in o.data)l!=="nodes"&&(r._collector[l]||(r._collector[l]=[]),r._collector[l]=r._collector[l].concat(o.data[l]));o.set({components:[r],refs:[],domEvents:[],storeEvents:[]});for(let l=0;l<r._collector.components.length;l++)r._collector.components[l]._parent=r;return o.get()}function u(t,e,n){const s=t._collector&&t._collector.components;if(n&&e(t),s)for(let o=0;o<s.length;o++)u(s[o],e);n||e(t)}function j(t){for(let e=0;e<t._collector.refs.length;e++)t._collector.refs[e].fn(t._collector.refs[e].ref),t._collector.refs[e].ref=null}function H(t){for(let e=0;e<t._collector.storeEvents.length;e++){const n=t._collector.storeEvents[e],s=n.fn;n.fn=function(o){s(o,n.el)},n.store.subscribe(n.fn),n.init&&n.fn(n.store.current)}}function I(t){t.test&&console.log("call dom listeners",t._collector.domEvents);for(let e=0;e<t._collector.domEvents.length;e++){const n=t._collector.domEvents[e];n.el.addEventListener(n.evt,n.fn)}}function O(t){u(t,j)}function U(t){u(t,I),u(t,H)}const Y=new Set(["g","svg","defs"]);function L(t,e=document.body,n){let s=0;const o=a(t,e&&Y.has(e.tagName));let r={_collector:o};if(O(r),u(r,function(i){i.afterRender&&i.afterRender(i.props)}),typeof e=="function"){const i=o.nodes.length<2?o.nodes[0]:o.nodes;e(i)}else if(e instanceof window.Element)for(s=0;s<o.nodes.length;s++)e.appendChild(o.nodes[s]);else if(typeof e=="object"&&e!==null&&e.insertBefore)for(s=0;s<o.nodes.length;s++)e.insertBefore.parentNode.insertBefore(o.nodes[s],e.insertBefore);if((!n||n.mounted)&&(U(r),u(r,function(i){i.mounted=!0,i.afterMount&&i.afterMount(i.props)})),n&&n._collector){const i=n._collector;for(s=0;s<o.components.length;s++)o.components[s]._parent=n;i.refs&&(i.refs=i.refs.concat(o.refs)),i.components&&(i.components=i.components.concat(o.components)),i.domEvents&&(i.domEvents=i.domEvents.concat(o.domEvents)),i.storeEvents&&(i.storeEvents=i.storeEvents.concat(o.storeEvents))}return r=void 0,o}class q{constructor(e={}){this._parent=null,this._collector={refs:[],components:[],domEvents:[],storeEvents:[]},this._storeListeners=[],this.refs={},this.state={},this.store={},this.props=e||{},this.base=null,this.mounted=!1,this.destroyed=!1;const n=e.name||this.constructor.name||"Component",{log:s,warn:o,error:r}=R(n,"white","#000",e.disableLog);this.log=s,this.warn=o,this.error=r}get dataProps(){return Object.entries(this.props).filter(([e])=>e.startsWith("data-")).reduce((e,[n,s])=>({...e,[n]:s}),{})}storeSubscribe(e,n,s,o=!0){e.subscribe(n,s),this._storeListeners.push([e,n,s]),o&&n.call(s,e.current)}template(){}beforeRender(){}afterRender(){}afterMount(){}beforeDestroy(){}ref(e){const n=this;return function(o){n.refs[e]=o}}refArray(e,n=!1){const s=this.refs[e]||(this.refs[e]=[]);let o=s.length,r,i;return n&&(r=this.refs.__pools||(this.refs.__pools={}),i=r[e]||(r[e]=[]),i.length&&(o=i.pop())),s[o]=null,function(l){s[o]=l,n&&i.push(o)}}refMap(e,n){const s=this.refs[n]||(this.refs[n]=new Map);return function(r){r?s.set(e,r):s.delete(e)}}render(e,n){return L(e,n,this)}destroy(){let e=0;for(this.beforeDestroy(this.props),e=this._collector.domEvents.length-1;e>=0;e--){const s=this._collector.domEvents[e];s.el.removeEventListener(s.evt,s.fn)}for(e=this._collector.storeEvents.length-1;e>=0;e--){const s=this._collector.storeEvents[e];s.store.unsubscribe(s.fn)}for(e=this._storeListeners.length-1;e>=0;e--){const s=this._storeListeners[e];s[0].unsubscribe(s[1],s[2])}for(e=this._collector.components.length-1;e>=0;e--)this._collector.components[e].destroy();if(this.mounted=!1,this.destroyed=!0,this._parent){const s=this._parent._collector.components.indexOf(this);~s&&this._parent._collector.components.splice(s,1),this._parent=null}for(e=this._collector.refs.length-1;e>=0;e--)this._collector.refs[e].fn(null),this._collector.refs.splice(e,1);let n=Array.isArray(this.base)?this.base:[this.base];for(e=0;e<n.length;e++)n[e]&&n[e].parentNode&&n[e].parentNode.removeChild(n[e]);this.base=n=null,this.props=null,this.state=null,this.store=null,this.refs=null,this._storeListeners=null}}exports.Component=q;exports.extend=g;exports.h=A;exports.noop=_;exports.render=L;
//# sourceMappingURL=Component-97e54875.cjs.map
