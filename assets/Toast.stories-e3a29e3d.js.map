{"version":3,"file":"Toast.stories-e3a29e3d.js","sources":["../../lib/components/Toast.jsx"],"sourcesContent":["import style from './Toast.module.scss'\n\nimport { Component, render } from '../jsx'\nimport { ensure, derived, writable } from '../state'\n\nimport Button from './Button'\nimport IconClose from 'iconoir/icons/cancel.svg?raw'\n\nimport noop from '../utils/noop'\n\nexport default class Toast extends Component {\n  static display (message, { parent = Toast.container, ...props } = {}) {\n    render(<Toast {...props} >{message}</Toast>, parent)\n  }\n\n  static get container () {\n    return document.querySelector('.' + style['toast-container']) ?? render(<div class={style['toast-container']} />, document.body).nodes[0]\n  }\n\n  beforeRender (props) {\n    this.handleClose = this.handleClose.bind(this)\n\n    this.state = {\n      label: ensure(writable)(props['store-label'], props.label),\n      title: ensure(writable)(props['store-title'], props.title),\n      icon: ensure(writable)(props['store-icon'], props.icon),\n      tone: ensure(writable)(props['store-tone'], props.tone),\n      count: ensure(writable)(props['store-count'], props.count)\n    }\n  }\n\n  template (props, state) {\n    return (\n      <div\n        {...this.dataProps}\n        id={props.id}\n        class={[\n          style.toast,\n          {\n            'has-icon': state.icon,\n            'has-duration': props.duration\n          },\n          ...(Array.isArray(props.class) ? props.class : [props.class])\n        ]}\n        event-mouseenter={e => (props['event-mouseenter'] ?? noop)(e, this)}\n        event-mouseleave={e => (props['event-mouseleave'] ?? noop)(e, this)}\n        store-data-count={state.count}\n        data-tone={state.tone}\n        style={{\n          '--toast-duration': (props.duration ?? -1) + 'ms'\n        }}\n      >\n        <span\n          ref={this.ref('icon')}\n          class={style.toast__icon}\n          store-data-count={state.count}\n          store-innerHTML={state.icon}\n        />\n\n        <div class={style.toast__content}>\n          {props.children}\n        </div>\n\n        <Button\n          icon={IconClose}\n          class='toast__btn--close'\n          title='Effacer la notification'\n          event-click={this.handleClose}\n        />\n      </div>\n    )\n  }\n\n  afterMount () {\n    if (this.props.duration) {\n      this.refs.timer = window.setTimeout(() => this.destroy(), this.props.duration)\n    }\n  }\n\n  handleClose (e) {\n    e.stopPropagation()\n    this.destroy()\n  }\n\n  beforeDestroy () {\n    ;(this.props['event-close'] || noop)()\n    if (this.refs.timer) window.clearTimeout(this.refs.timer)\n  }\n}\n"],"names":["Toast","Component","message","parent","props","render","style","h","ensure","writable","state","e","noop","Button","IconClose"],"mappings":"mhBAUA,MAAqBA,UAAcC,CAAU,CAC3C,OAAO,QAASC,EAAS,CAAE,OAAAC,EAASH,EAAM,UAAW,GAAGI,CAAU,EAAA,GAAI,CACpEC,IAAQL,EAAO,CAAA,GAAGI,CAAS,EAAAF,CAAQ,EAAUC,CAAM,CACrD,CAEA,WAAW,WAAa,CACtB,OAAO,SAAS,cAAc,IAAMG,EAAM,iBAAiB,CAAC,GAAKD,EAAOE,EAAC,OAAI,MAAOD,EAAM,iBAAiB,EAAG,EAAI,SAAS,IAAI,EAAE,MAAM,CAAC,CAC1I,CAEA,aAAcF,EAAO,CACnB,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAE7C,KAAK,MAAQ,CACX,MAAOI,EAAOC,CAAQ,EAAEL,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,MAAOI,EAAOC,CAAQ,EAAEL,EAAM,aAAa,EAAGA,EAAM,KAAK,EACzD,KAAMI,EAAOC,CAAQ,EAAEL,EAAM,YAAY,EAAGA,EAAM,IAAI,EACtD,KAAMI,EAAOC,CAAQ,EAAEL,EAAM,YAAY,EAAGA,EAAM,IAAI,EACtD,MAAOI,EAAOC,CAAQ,EAAEL,EAAM,aAAa,EAAGA,EAAM,KAAK,CAAA,CAE7D,CAEA,SAAUA,EAAOM,EAAO,CAEpB,OAAAH,EAAC,MAAA,CACE,GAAG,KAAK,UACT,GAAIH,EAAM,GACV,MAAO,CACLE,EAAM,MACN,CACE,WAAYI,EAAM,KAClB,eAAgBN,EAAM,QACxB,EACA,GAAI,MAAM,QAAQA,EAAM,KAAK,EAAIA,EAAM,MAAQ,CAACA,EAAM,KAAK,CAC7D,EACA,mBAAwBO,IAAAP,EAAM,kBAAkB,GAAKQ,GAAMD,EAAG,IAAI,EAClE,mBAAwBA,IAAAP,EAAM,kBAAkB,GAAKQ,GAAMD,EAAG,IAAI,EAClE,mBAAkBD,EAAM,MACxB,YAAWA,EAAM,KACjB,MAAO,CACL,oBAAqBN,EAAM,UAAY,IAAM,IAC/C,CAAA,EAEAG,EAAC,OAAA,CACC,IAAK,KAAK,IAAI,MAAM,EACpB,MAAOD,EAAM,YACb,mBAAkBI,EAAM,MACxB,kBAAiBA,EAAM,IAAA,CACzB,IAEC,MAAI,CAAA,MAAOJ,EAAM,cAAA,EACfF,EAAM,QACT,EAEAG,EAACM,EAAA,CACC,KAAMC,EACN,MAAM,oBACN,MAAM,0BACN,cAAa,KAAK,WAAA,CACpB,CAAA,CAGN,CAEA,YAAc,CACR,KAAK,MAAM,WACR,KAAA,KAAK,MAAQ,OAAO,WAAW,IAAM,KAAK,UAAW,KAAK,MAAM,QAAQ,EAEjF,CAEA,YAAa,EAAG,CACd,EAAE,gBAAgB,EAClB,KAAK,QAAQ,CACf,CAEA,eAAiB,EACb,KAAK,MAAM,aAAa,GAAKF,GAAM,EACjC,KAAK,KAAK,OAAc,OAAA,aAAa,KAAK,KAAK,KAAK,CAC1D,CACF;;;;;;;;;;;;;;;;;;;;;;"}